<img src="https://noticon-static.tammolo.com/dgggcrkxq/image/upload/v1659254245/noticon/rj5wzu8zlbf1ddo2u8hq.png" height="15%" width="15%"> <br/>


ğŸ—“ï¸ ë‚ ì§œâ€â€â€â€â€â€â€â€â€â€â€â€2023/04/13

â˜ï¸ ë‚ ì”¨â€â€â€â€â€â€â€â€â€â€â€ğŸ˜· ëŒ€ì²´ë¡œ íë¦¼ , ë¯¸ì„¸ë¨¼ì§€ ìµœì•…  (14Â°C)


## 01. JSP

ğŸ’¡ JSP(JavaServer Pages)ëŠ” ì›¹ í˜ì´ì§€ì˜ ì»¨í…íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” HTML íŒŒì¼ ë‚´ì— ì„œë²„ìƒì—ì„œ ë™ì ìœ¼ë¡œ ì²˜ë¦¬ í•˜ë ¤ëŠ” ë¶€ë¶„ì„ ì ë‹¹í•œ JSP íƒœê·¸ì™€ Java ì½”ë“œë¥¼ ì‚½ì…í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.

- JSPëŠ” ì‹¤í–‰ í•œ í›„ Java Servletìœ¼ë¡œ ë³€í™˜ëœ í›„ ì‹¤í–‰ëœë‹¤ â†’ ì¼ì¢…ì˜ Servlet
- HTML ë¬¸ì„œì— ìŠ¤í¬ë¦½íŠ¸ ë°©ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ë™ì ì¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
- JSPëŠ” get,post ë‘˜ë‹¤ ë™ì‘ ë˜ë©° ë°©ì‹ì— ì¢…ì† ë˜ì§€ ì•ŠëŠ”ë‹¤.

### 1.1 JSP íƒœê·¸ì˜ ì¢…ë¥˜

- <%@    %> ì§€ì‹œì íƒœê·¸
    - JSP í˜ì´ì§€ì— ì¢…ì†ì ì¸ ì„¤ì • ì •ë³´ë“¤ì„ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.
- <%    %> ìŠ¤í¬ë¦½íŠ¸(ìˆ˜í–‰ë¬¸) íƒœê·¸
    - Java APIë¥¼ ì´ìš©í•˜ê±°ë‚˜ ê¸°íƒ€ Javaë¥¼ ì´ìš©í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.
    - ì§€ì—­ ë³€ìˆ˜
- <%!    %> ì„ ì–¸ë¬¸(ë³€ìˆ˜ì„ ì–¸, ë©”ì„œë“œì •ì˜)íƒœê·¸
    - JSP í˜ì´ì§€ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ë©¤ë²„ ë³€ìˆ˜ë‚˜ ë©”ì„œë“œë¥¼ ì„ ì–¸í•œë‹¤
    - ë©¤ë²„ ë³€ìˆ˜
- <%=    %> í‘œí˜„ì‹
    - ë™ì  ë°ì´í„°ë¥¼ ì‘ë‹µ ì •ë³´ì— ì¶”ê°€í•˜ê¸° ìœ„í•œ ì‹ì„ ì •ì˜í•œë‹¤.
- <%â€”   â€”%> : ì£¼ì„ë¬¸

> í‘œí˜„ì‹ì— ; ì´ ì˜¬ ìˆ˜ ì—†ë‹¤ â†’ ì‹ë§Œ ì˜¬ ìˆ˜ ìˆë‹¤.
>
    
## 02. ì§€ì‹œì íƒœê·¸

### 2.1 page ì§€ì‹œì íƒœê·¸

ğŸ’¡ì»¨í…Œì´ë„ˆê°€ ì°¸ì¡°í•˜ëŠ” ë‹¤ì–‘í•œ ì •ë³´ë“¤ ì¤‘ì—ì„œ JSP í˜ì´ì§€ì— ì¢…ì†ì ì¸ ì„¤ì • ì •ë³´ë“¤ì„ ì•Œë ¤ì£¼ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. 

- í•´ë‹¹ JSP í˜ì´ì§€ê°€ ì–´ë–¤ ë¬¸ì„œë¥¼ ìƒì„±í•˜ëŠ”ì§€, ì–´ë–¤ javaí´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€,ì„¸ì…˜ì— ì°¸ì—¬í•˜ëŠ”ì§€, ì¶œë ¥ ë²„í¼ì˜ ì¡´ì¬ ì—¬ë¶€ì™€ ê°™ì´ JSP í˜ì´ì§€ë¥¼ ì‹¤í–‰ í•˜ëŠ”ë° ê¸°ë³¸ì´ ë˜ëŠ” ì •ë³´ë¥¼ ì§€ì •í•´ ì¤„ ìˆ˜ ìˆë‹¤.
- <%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8" import="java.util.Date"%>
    - contentType , charset, pageEncoding, language ì„¤ì • ê¼­ í•´ì•¼í•¨

### 2.2 include ì§€ì‹œì íƒœê·¸

ğŸ’¡ JSP í˜ì´ì§€ëŠ” ì—¬ë ¤ íŒŒì¼ë“¤ì„ í¬í•¨ í•  ìˆ˜ ìˆëŠ”ë° JSP êµ¬ë¬¸ì— ìœ„ë°˜ ë˜ì§€ ì•ŠëŠ” í•œ include ì§€ì‹œìë¥¼ í†µí•´ ë¶ˆëŸ¬ ì“¸ ìˆ˜ ìˆë‹¤.

- ë‹¤ë¥¸ íŒŒì¼ì˜ ë‚´ìš©ì„ í¬í•¨
- <%@ include file=â€íŒŒì¼ëª….jspfâ€ %>


## 03. JSPì˜ ë‚´ì¥ ê°ì²´

ğŸ’¡ JSP í‘œí˜„ì‹ íƒœê·¸ì™€ ìŠ¤í¬ë¦½íŠ¸ë¦¿íƒœê·¸ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¬í”Œí•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë‚´ì¥ ê°ì²´ë¥¼ ì§€ì›

- ë‚´ì¥ ê°ì²´ë¥¼ ì„ ì–¸í•˜ê³  ì´ˆê¸°í™” í•˜ëŠ” ê²ƒì€ JSP ì»¨í…Œì´ë„ˆê°€ JSP ì†ŒìŠ¤ë¥¼ Servlet ì†ŒìŠ¤ ì½”ë“œë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì—ì„œ ìë™ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.

![JSP Object](https://user-images.githubusercontent.com/55836020/231967623-233f1184-cfd5-4573-b543-3e50e74cac31.png)

### 3.1 Request

- request.getMethod() : í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ ë°©ì‹ì„ ë¦¬í„´í•´ ì£¼ëŠ” ë©”ì†Œë“œ
- request.getParameter(â€ë³€ìˆ˜ëª…â€) : ìš”ì²­í• ë•Œ í´ë¼ì´ì–¸íŠ¸ë¡œ ë¶€í„° ì˜¨ ë°ì´í„° ì •ë³´ ì¶”ì¶œ ë©”ì„œë“œ
- request.getRequestURI() : ìš”ì²­ ì˜¨ URL

### 3.2 Application

- application.getResourcePaths("/") : web applicatiom ë””ë ‰í† ë¦¬ì˜ íŒŒì¼ ë¦¬ìŠ¤íŠ¸
- application.getContextPath() : ì»¨í…ìŠ¤íŠ¸ ê²½ë¡œ
- application.getServerInfo() : ì„œë²„ì˜ ì •ë³´ (ex. tomcat~~)
- application.getSessionTimeout()  : inactive time, session ë§Œë£Œ ì‹œê°„

### 3.3 Session

- session.setAttribute("ì €ì¥ëª…", ê°ì²´ëª…); : session ì €ì¥
- session.setMaxInactiveInterval(60) : ì´ˆ ë‹¨ìœ„, ì„¸ì…˜ ìµœëŒ€ ìœ ì§€ ì‹œê°„



## Exercise01 / Session

<details>
<summary>ğŸ“œ Sessionì‹¤ìŠµ í¼ì³ë³´ê¸°</summary>
<div markdown="1">



1ï¸âƒ£ **[ì‹¤ìŠµ 1]**

<img height="80%" width="80%" src = "https://user-images.githubusercontent.com/55836020/231968145-3147ff5b-c256-4561-bdd3-0d92b58bf04b.png"/>

- productlog.htmlì„ ë§Œë“ ë‹¤.
- ì‚¬ì§„ì„ í´ë¦­í•˜ë©´ ì„ íƒí•œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ ëª©ë¡ì— ìƒí’ˆëª… : ìƒí’ˆ ìˆ˜ ì¶œë ¥
- AJAX ê¸°ìˆ ì„ ì‚¬ìš©í•´ì„œ ì„ íƒëœ ìƒí’ˆì˜ IDë¥¼ ì „ë‹¬í•˜ë©´ì„œ BasketServletì„ Get ë°©ì‹ìœ¼ë¡œ ìš”ì²­í•œë‹¤.
- ì„œë²„ì—ì„œ ì‘ë‹µëœ JSON í˜•ì‹ëœ JSON í˜•ì‹{ â€œp00xâ€: ì„ íƒê°¯ìˆ˜, â€œp00xâ€ : ì„ íƒê°¯ìˆ˜, â€¦ }ì˜ ë‚´ìš©ì—ì„œ ìƒí’ˆ IDì™€ ì„ íƒ ê°¯ìˆ˜ë¥¼ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ í•˜ë‹¨ì— ì¶œë ¥í•œë‹¤.

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
/* cssìƒëµ */
</style>
</head>
<body>
	<h2>ì›í•˜ëŠ” ìƒí’ˆì„ í´ë¦­í•´ ì£¼ì„¸ìš”.</h2>
	<hr>
	<div id="prdContainer"></div>
	<div id="selectedPrd">
		<h4>ì„ íƒí•œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸</h4>
		<hr>
		<div id="List">
		</div>
		<button type="button">ìƒí’ˆ ë¹„ìš°ê¸°</button>
	</div>
	<script>
		// ì´ë¯¸ì§€ ë¬¸ì„œì— ë‚˜íƒ€ë‚´ëŠ” ë©”ì„œë“œ
		function showImg() {
			const prdContainer = document.getElementById("prdContainer");
			for (let i = 1; i < 10; i++) {
				prdContainer.innerHTML += `<img src='../images/${i}.jpg' name='p00${i}' id='${i}' />`;
			}
			prdContainer.innerHTML += `<img src='../images/10.jpg' name='p010' id='10' />`
		}
		
		const ListContainer = document.getElementById("List");
		
		function prdClickHandler(e) {
			const xhr = new XMLHttpRequest();
			xhr.onload = function() {
				if (xhr.status == 200) {
					const jsonObj = JSON.parse(xhr.responseText);
					const prdList = Object.keys(jsonObj);
			
					ListContainer.innerHTML = "<ul>"
					for (i in prdList) {
						ListContainer.innerHTML += `<li>${prdList[i]} ìƒí’ˆ ${jsonObj[prdList[i]]}ê°œ </li>`;
					}
					ListContainer.innerHTML += "</ul>"
				}
			}

			xhr.open('GET', `/edu/basket?id=${e.target.name}`, true);
			xhr.send();
		}

		function clearProduct() {
			const xhr = new XMLHttpRequest();
			xhr.onload = function() {
				if (xhr.status == 200) {
					const clearMsg = JSON.parse(xhr.responseText);
					ListContainer.innerHTML = "<p>"+clearMsg["msg"]+"</p>"; 
				}
			}
			xhr.open('GET', `/edu/basket`, true);
			xhr.send();
		}

		window.addEventListener("load", showImg);
		const prdContainer = document.getElementById("prdContainer");
		prdContainer.addEventListener("click", prdClickHandler);
		
		
		let btn = document.getElementsByTagName("button")[0];
		btn.addEventListener("click",clearProduct);
		
	</script>
</body>
</html>
```

- core.BasketServlet
- ë§µí•‘ëª… : /basket
- ìƒí’ˆì´ í´ë¦­ë  ë•Œë§ˆë‹¤ AJAX ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ ì„ íƒëœ ìƒí’ˆì˜ ID ë¥¼ ì „ë‹¬í•˜ë©´ì„œ core.BasketServletì„ GET ë°©ì‹ìœ¼
ì„ íƒí•œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ { â€œp001â€ : â€œìƒí’ˆ 3ê°œâ€ , â€œp003â€ : â€œìƒí’ˆ 1ê°œâ€, â€œp007â€ : â€œìƒí’ˆ 2ê°œâ€}
ìƒí’ˆë¹„ìš°ê¸°ë¡œ ìš”ì²­í•œë‹¤. ì„ íƒëœ ìƒí’ˆ ì •ë³´ëŠ” ê³„ì† ìœ ì§€ë˜ì–´ì•¼ í•œë‹¤. 10ê°œì˜ ì›ì†Œë¥¼ ê°€ì§€ëŠ” int íƒ€ì…ì˜ ë°°ì—´ì„ ìƒì„±í•˜ì—¬ session ê°ì²´ì— ë³´ê´€í•˜ê³  ì„ íƒëœ ìƒí’ˆê³¼ ë§¤í•‘ë˜ëŠ” ì›ì†Œì˜ ê°’ì„ 1 ì¦ê°€ì‹œí‚¨ í›„ì— { â€œp00xâ€: ì„ íƒê°¯ìˆ˜, â€œp00xâ€ : ì„ íƒê°¯ìˆ˜, â€¦ } ì™€ ê°™ì´ JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•œë‹¤. ìƒí’ˆë¹„ìš°ê¸°ë¥¼ í´ë¦­í•˜ë©´ core.BasketServletì„ Query ë¬¸ìì—´ ì—†ì´ìš”ì²­í•˜ë©° ì´ ë•ŒëŠ” ì„¸ì…˜ê°ì²´ì— ë³´ê´€ë˜ì–´ ìˆë˜ ìƒí’ˆ ì •ë³´ë¥¼ ì‚­ì œí•œ í›„ ë¸Œë¼ìš°ì €ë¡œ {â€œmsgâ€: â€œìƒí’ˆì´ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.â€} ë¼ëŠ” JSON í˜•ì‹ì˜ ì½˜í…ì¸ ë¥¼ ì‘ë‹µí•œë‹¤.ì‘ë‹µëœ JSON ë‚´ìš©ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ íŒŒì‹±í•˜ì—¬ ì½ê³  â€˜ì„ íƒí•œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸â€™ ì˜ì—­ì— ul íƒœê·¸ë¡œ ì¶œë ¥í•œë‹¤.

```java

@WebServlet(description = "basket", urlPatterns = { "/basket" })
public class BasketServlet extends HttpServlet {
	private static final long serialVersionUID = 1L;

	
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setContentType("application/json; charset=utf-8");
		PrintWriter out = response.getWriter();
		String prdName = request.getParameter("id");
		
		HttpSession session = request.getSession();
		
		
		if(prdName == null) {
			session.invalidate();
			JSONObject msg = new JSONObject();
			msg.put("msg", "ë°ì´í„°ë¥¼ ì§€ì› ì–´ìš”~");
			out.write(msg.toString());
			return;
		}
		
		int index = Integer.parseInt( prdName.substring(1))-1;
		if(session.isNew()) {
			session.setAttribute("prdCnt", new int[10]);
		}
		
		int [] arr = (int [])session.getAttribute("prdCnt");
		arr[index]++;
		session.setAttribute("prdCnt", arr);
		
		System.out.println(arr[0]);
		
		JSONObject jobj = new JSONObject();// jsonê°ì²´ ìƒì„±
		for(int i=0 ; i < arr.length ; i++) {
			if(arr[i] != 0) {
				jobj.put(String.format("p%03d", i+1), arr[i]);
			}
		}
		

		out.write(jobj.toString());
		out.close();
		
	
	}
}
```


</div>
</details>


## ğŸ‘© todayâ€™s feeling + ê¸°ì–µí•  ì â—

- ì²« êµì‹œë¶€í„° ì‹¤ìŠµì„ í–ˆëŠ”ë° 5êµì‹œ ê¹Œì§€ í–ˆë‹¤.. ì˜¤ëŠ˜ ì‹¤ìŠµ ë‹¤ì‹œ í•œë²ˆ ë³´ê³  ìµíˆê¸°
- ì‹¤ìŠµì—ì„œ responseë¥¼ json íƒ€ì…ìœ¼ë¡œ ë³´ë‚´ëŠ” ë°©ë²• ì°¾ëŠ”ë° ì˜¤ë˜ ê±¸ë¦¼ â†’mime type ê¸°ì–µí•˜ê¸° ã… ã… 
- [ ] ì¼ìš”ì¼ì— git íŠ¹ê°• ë“£ê¸°
