<img src="https://noticon-static.tammolo.com/dgggcrkxq/image/upload/v1623252802/noticon/dwhdor3qcwlynwmnqsxy.png" height="15%" width="15%"> <br/>

# 2023-04-10 / Ajax

ğŸ—“ï¸ ë‚ ì§œâ€â€â€â€â€â€â€â€â€â€â€2023/04/ 10

â˜ï¸ ë‚ ì”¨â€â€â€â€â€â€â€â€â€â€â€â˜€ï¸ ë§‘ìŒ (11Â°C)

</br>

## 01. XML(Extensible Markup Language)

ğŸ’¡ ê·œê²©í™”ëœ ë¬¸ì„œë¥¼ ë§Œë“œëŠ” ì–¸ì–´, íƒœê·¸ë¥¼ ëª©ì ì— ì•Œë§ê²Œ ì§ì ‘ ì„¤ê³„(DTD, XML Schema)

- XML íƒœê·¸ëŠ” ì‚¬ìš©ì ì„ì˜ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- XMLì˜ íƒœê·¸ëŠ” ì–´ë– í•œ ë°ì´í„°ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì´ë¦„ì„ ì„ì˜ë¡œ ì§€ì€ íƒœê·¸ë¡œ ë°ì´í„°ë¥¼ ê°ì‹¼ë‹¤. â†’ íƒœê·¸ë¡œ ë°ì´í„°ë¥¼ ì„¤ëª…
- í…ìŠ¤íŠ¸ ê¸°ë°˜ì´ë©° ê°„ê²°í•œ ë°ì´í„°í˜•ì´ë‹¤.

```xml
<students>
	<student>
		<name>í™ê¸¸ë™</name> <gender>ë‚¨</gender>
	</student>
	<student>
		<name>í™ê¸¸ìˆœ</name> <gender>ì—¬</gender>
	</student>
</students>

```

## 02. JSON

ğŸ’¡ ì¸í„°ë„·ì—ì„œ ìë£Œë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ê·¸ ìë£Œë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•

- ìë£Œì˜ ì¢…ë¥˜ì—ëŠ” í° ì œí•œì´ ì—†ê³ , í”„ë¡œê·¸ë¨ì˜ ë³€ìˆ˜ê°’ì„ í‘œí˜„í•˜ëŠ”ë° ì í•©
- í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì™€ í”Œë«í¼ì— ë…ë¦½ì ì´ì–´ì„œ ì„œë¡œ ë‹¤ë¥¸ ì‹œìŠ¤í…œê°ì— ê°ì²´ë¥¼ êµí™˜í•˜ê¸°ì— ì¢‹ë‹¤.

### 2.1 JSON í‘œí˜„ë°©ë²•

- Object : { String : value , .. }
- array : [ value, ..]
- value : String,number,object,array,true,false,null
- â€œâ€ â†’ë”ë¸” ì¸ìš© ë¶€í˜¸ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤(â€™â€™ ì•ˆë¨)

```json
{
	"students": {
			"student" : [
					{"name":"í™ê¸¸ë™", "gender" : "ë‚¨"},
					{"name":"í™ê¸¸ìˆœ", "gender" : "ì—¬"},
			]
		}		
}
```

## 03. AJAX(Asynchronous JavaScript and XML)

ğŸ’¡ ì¬ë¡œë“œ(refresh)í•˜ì§€ ì•Šê³  ì›¹í˜ì´ì§€ì˜ ì¼ë¶€ë§Œì„ ê°±ì‹ í•˜ì—¬ ì›¹ì„œë²„ì™€ ë°ì´í„°ë¥¼ êµí™˜í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì¦‰, ë¹ ë¥´ê²Œ ë™ì  ì›¹í˜ì´ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.

- ë¸Œë¼ìš°ì € ë‚´ Ajax Engineì„ í†µí•´ì„œ ì„œë²„ì™€ í†µì‹ í•œë‹¤.
    - new XMLHttpRequest(); â€”> ajax Engineì„ ì´ˆê¸°í™” í•˜ëŠ” ê°ì²´
- .onload event â†’ load ê°€ ë™ì‘ë˜ë©´ ì²˜ë¦¬í•  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
- ë¹„ë™ê¸°, ë™ê¸° í†µì‹  ë‘˜ë‹¤ ì§€ì›í•˜ì§€ë§Œ ë¹„ë™ê¸° í†µì‹ ì„ ë” ë§ì´ ì²˜ë¦¬í•œë‹¤.
    - ì›¹ í´ë¼ì´ì–¸íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë™ê¸° í†µì‹ .
    - Ajaxë¥¼ í†µí•´ì„œ ë¹„ë™ê¸° í†µì‹ ì„ ì§€ì›

### 3.1 XMLHttpRequest()

- ì„œë²„ ì¸¡ê³¼ ë¹„ë™ê¸° í†µì‹ ì„ ì œì–´í•˜ëŠ” ê°ì²´ â†’ javaScriptê°€ ì œì–´í•  ìˆ˜ ìˆê²Œí•¨
- ì‘ë‹µì´ json,text ì¼ ë•Œ ì‚¬ìš© í”„ë¡œí¼í‹° : xhr.responseText
- ì‘ë‹µì´ xml ì¼ ë•Œ  ì‚¬ìš© í”„ë¡œí¼í‹° :  xhr.responseXML
- xhr.onload() â†’ requestì˜ ì‘ë‹µì´ ì˜¤ë©´ ì‹¤í–‰ ì½”ë“œ ìˆ˜í–‰
- HTTP ìš”ì²­ ì´ˆê¸°í™” ë©”ì„œë“œ : xhr.open(â€http methodâ€, â€œurlâ€, ë¹„ë™ê¸° ëª¨ë“œ í†µì‹  ì—¬ë¶€);
    - HTTP ë©”ì„œë“œ : GET, POST, PUT, DELETE
    - URL : ìš”ì²­í•˜ë ¤ëŠ” ì„œë²„ì˜ ëŒ€ìƒ í˜ì´ì§€
    - ë¹„ë™ê¸° ëª¨ë“œ í†µì‹  ì—¬ë¶€ : true(ë¹„ë™ê¸°), false(ë™ê¸° í†µì‹ )
- HTTP ìš”ì²­ì„ ì†¡ì‹  ë©”ì„œë“œ : xhr.send([body])
    - POST ì˜ ê²½ìš° Query ë¬¸ìì—´ì„ ì¸ìˆ˜ë¡œ ì§€ì •
- ìš”ì²­ ì‹œ í—¤ë” ì¶”ê°€ ë©”ì„œë“œ: xhr.setRequestHeader(header, value);

> onloadë‚´ e.targetì€ xhr.responseText ì™€ ë™ì¼í•˜ë‹¤.
> 

### 3.2 HTTP Method

ğŸ’¡ ì›¹ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì›¹ ì„œë²„ì—ê²Œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ name=value&name=valueë¡œ êµ¬ì„±ëœ ë°ì´í„°ë¥¼ í•¨ê»˜ ì „ë‹¬ ê°€ëŠ¥

- GET ë°©ì‹ : ìš”ì²­ ëŒ€ìƒ URLë¬¸ìì—´ ë’¤ì— ? ê¸°í˜¸í™” í•¨ê»˜ ì¶”ê°€ë˜ì„œ ì „ë‹¬
    - ê¸¸ì´ì— ì œí•œ, ì™¸ë¶€ë¡œ ë³´ì—¬ì§„ë‹¤. â€”â†’ì¿¼ë¦¬ë¬¸ìì—´
- POST ë°©ì‹ : ìš”ì²­ ë°”ë””ì•ˆì— ë‹´ì•„ì„œ ì „ë‹¬
    - ê¸¸ì´ì— ì œí•œ, ì™¸ë¶€ì— ë³´ì—¬ì§€ì§€ ì•ŠìŒ. â€”â†’ ìš”ì²­ íŒŒë¼ë¯¸í„°

## 04. SOP

ğŸ’¡ ë¸Œë¥´ìš°ì €ì—ì„œ ë³´ì•ˆìƒì˜ ì´ìŠˆë¡œ ë™ì¼ ì‚¬ì´íŠ¸ì˜ ìì›(Resource)ë§Œ ì ‘ê·¼ í•´ì•¼ í•œë‹¤ëŠ” ì œì•½

- Same Origin Policy(SOP)
- AJAXëŠ” ì´ ì œì•½ì— ì˜í–¥ì„ ë°›ìœ¼ë¯€ë¡œ Origin ì„œë²„ê°€ ì•„ë‹ˆë©´ AJAXë¡œ ìš”ì²­í•œ ì»¨í…ì¸ ë¡œ ìˆ˜ì‹ í•  ìˆ˜ ì—†ë‹¤.

### 4.1 CORS

- Cross Origin Resource Sharing(CORS)
- Originì´ ì•„ë‹Œ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ ìì›ì„ ì ‘ê·¼í•˜ì—¬ ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸
- ë°ì´í„°ë¥¼ ê³µìœ  í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©.
- Open APIì˜ í™œì„±í™”ì™€ ê³µê³µDBì˜ í™œìš©ì— ì˜í•´ì„œ CORSì˜ ì¤‘ìš”ì„±ì´ ê°•ì¡° ë˜ê³  ìˆë‹¤.
- HTTP Headerì—  CORSì™€ ê´€ë ¨ëœ í•­ëª©ì„ ì¶”ê°€í•œë‹¤.
    - response.addHeader(â€Access-Control-Allow-Originâ€,â€*â€);


## ê¸°íƒ€

- majortype/minortype â€”> MIME type ë¬¸ìì—´
    - text/html
    - text/xml
    - application/json(text/json)
    - image/gif , image/png, image/jpg
    - text/plain
    
- DOM ê°ì²´ ìƒì„± ë° ì†ì„± ì¶”ê°€

## Exercise01 / JSP
<details>
<summary>ğŸ“œ CSS í¼ì³ë³´ê¸°</summary>
<div markdown="1">


1ï¸âƒ£ **[ì‹¤ìŠµ 1]**

content/weather.jsp ë¥¼ ìš”ì²­í•˜ê³  ì‘ë‹µëœ ë‚´ìš©ì—ì„œ
ë°œí‘œì¼ì‹œ(YYYYYYY), ì˜¨ë„(ZZ), í…ìŠ¤íŠ¸ë‚ ì”¨(XXX) ê·¸ë¦¬ê³  ë‚ ì”¨ì´ë¯¸ì§€ë¥¼ ì¶”ì¶œí•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì¶œë ¥í•œë‹¤.
ì›¹ í°íŠ¸ë¥¼ ì„ì˜ë¡œ ì •í•˜ì—¬ ì‚¬ìš©í•œë‹¤.

```<h1>```ì˜¤ëŠ˜ì˜ ë‚ ì”¨ ì •ë³´-XXX```</h1>```
  
```<hr>```

ë°œí‘œ ì¼ì‹œ : YYYYYY
ì˜¨ë„ : ZZë„

ë‚ ì”¨ì´ë¯¸ì§€ì¶œë ¥

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajax exercise15</title>
</head>
<body>
<h1 id='title'>ì˜¤ëŠ˜ì˜ ë‚ ì”¨ ì •ë³´ - </h1>
<hr>
<div id='weatherContainer'>
</div>
<script>
window.onload = function () {
	const xhr = new XMLHttpRequest();
	xhr.onload = function (e) {
		if(xhr.status == 200) {
			const str = xhr.responseText;
			const obj = JSON.parse(str);
			const title = document.getElementById('title');
			title.innerHTML += obj.wtext;
			const weather = document.getElementById('weatherContainer');
			weather.innerHTML += `<h3>ë°œí‘œì¼ì‹œ : ${obj.time}</h3>`;
			weather.innerHTML += `<h3>ì˜¨ë„ : ${obj.temp}ë„ </h3>`;
			weather.innerHTML += `<img src='../../${obj.img}' width='30%' height='30%' />`
		}
	};
	xhr.open('GET','content/weather.jsp', true);
	xhr.send();
};
</script>
</body>
</html>
```

</div>
</details>

## ğŸ¤·â€â™€ï¸ todayâ€™s feeling

- xmlê³¼ jsonì˜ ë°ì´í„° í‘œí˜„ ë°©ë²• ì°¨ì´ì  ì•Œê¸°! â†’ jsonì´ ì‚¬ìš©í•˜ê¸° í¸ë¦¬í•˜ë‹¤..
- cors ì •ì±… í•œë²ˆë” í™•ì¸í•˜ê¸°
- map API ì˜ˆì œë¡œ ê°€ë³ê²Œ í™•ì¸í•´ë´¤ë‹¤.(ë¯¸ë‹ˆ í”„ë¡œì íŠ¸ ë•Œ í™œìš© ê°€ëŠ¥í•  ìˆ˜ ìˆê²Œ )  

