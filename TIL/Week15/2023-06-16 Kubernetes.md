<img src="https://noticon-static.tammolo.com/dgggcrkxq/image/upload/v1566913282/noticon/xyzfawahazvkwiyje7it.png" height="15%" width="15%"> <br/>

# 2023-06-16 / Kubernetes

🗓️ 날짜           2023/06/16

☁️ 날씨            ☀️ 맑음 (22 °C)

## 클라우드(Cloud) 컴퓨팅

💡 서로 다른 물리적인 위치에 존재하는 컴퓨팅 자원을 가상화 기술로 통합해 제공하는 기술

- 웹에만 접속하면 언제 어디서나 원하는 컴퓨팅 자원을 클라우드로부터 제공받아 사용

## AWS의 EC2

💡 EC2는 AWS에서 제공하는 클라우드 컴퓨팅 서비스다.

- 용량을 늘리거나 줄일 수 있다.(탄력적)
- 사용한 만큼 지불하므로 저렴하다.
- 사용자가 인스턴스를 완전히 제어할 수 있다.
- 보안 및 네트워크 구성, 스토리지 관리 효과적이다.
- 인스턴스 시작

## Container Orchestration

💡 컴퓨터 자원과 어플리케이션, 서비스에 대한 자동화된 설정, 관리 및 제어 체계

## 쿠버네티스

💡 컨테이너화된 서비스를 관리하기 위한  시스템으로 오픈 소스 기반으로 되어있다.

- 클러스터 :  공통의 목적을 위해 작동하는 컴퓨터 또는 애플리케이션들의 그룹
- 쿠버네티스는 마스터 노드와 워커 노드로 동작 한다.
- 도커 컴포즈는 컨테이너들을 실행하는 역할만 하고, 실행된 컨테이너를 관리하는 역할은 하지 못한다.
- 도커 데스크탑이 쿠버네티스를 지원 함.
- **마스터 노드**
    - 컨테이너 실행 안 함
    - 워커 노드에서 실행되는 컨테이너 관리
    - 컨테이너 엔진 실행 안됨
- **워커 노드**
    - 실제 서버 역할
    - 컨테이너가 실제 동작하는 서버
    - 컨테이너 엔진 설치

### 파드(pod)

- 쿠버네티스에서 관리하는 컨테이너 단위
- 컨테이너와 볼륨을 하나로 묶은 것
- 1개의 컨테이너 또는 여러 개의 컨테이너로 구성될 수도 있음
- 쿠버네티스에서 생성하고 관리할 수 있는 배포 가능한 가장 작은 컴퓨팅 단위

### 서비스(Service)

- 여러 개의 파드를 하나로 관리
- 서비스가 관리하는 파드는 모두 동일한 구성으로 이루어짐.
- 각 서비스는 자동으로 고정된 IP 주소를 부여 받으며, 이 주소로 통신 → 여러 개의 파드로 구성되어도 IP 주소는 1개만 부여

![Untitled](https://github.com/juhee99/Kosa-fullStack/assets/55836020/97946885-33d5-4228-809c-56aedc97ab53)

## CI/CD

- CI
    - CI 는 빌드/테스트 자동화 과정이다.
    - 개발자를 위한 자동화 프로세스인 지속적인 통합을 의미한다.
- CD
    - CD는 배포 자동화 과정이다.
    - CD는 지속적인 서비스 제공 또는 지속적인 배포를 의미하며 디 두 용어는 상호 교환적으로 사용된다.

### CI/CD 적용 후의 빌드 과정

1. 개발자들이 개발 후 코드를 push
2. git push를 통해 Trigger되어 CI서버에서 알아서 Build, Test, Lint를 실행하고 결과를 전송
3. 개발자들은 결과를 전송받고 에러가 난 부분이 있다면 에러부분을 수정하고 코드를 master 브랜치에 merge
4. master 브랜치에 코드를 merge하고 Build, Test가 정상적으로 수행이 되었다면 CI서버에서 알아서 Deploy 과정을 수행

## GitHub Actions

💡 깃허브 액션은 깃허브에서 제공하는 CI/CD 플랫폼으로 빌드, 테스트, 배포를 자동화시키는 파이프라인을 만들 수 있다.

- 깃허브 액션을 통해 깃허브에 소스코드가 올라오면 테스트, 빌드, 도커 이미지 빌드, 도커 허브 업로드 또는 서버리스를 위한 클라우드의 업로드 등을 자동으로 수행하는 파이프라인을 구축할 수 있다.
- 자동으로 코드 저장소에서 어떤 이벤트가 발생했을 때 특정 작업이 일어나게 하거나 주기적으로 어떤 작업들을 반복해서 실행시킬 수도 있다.

### GitHub Action 구성 요소

1. **Event**
    - 워크플로우 실행을 발동시키는 특정한 활동
    - 깃허브 코드 푸시하면 발생하는 push event ,머지하면 발생하는 pull request event
    - 깃허브에서 발생하는 대부분의 작업을 event로 정의할 수 있음
2. **Workglows**
    - 자동화하려는 내용을 담고 있는 스크립트
    - 한 개 이상의 job을 실행할 수 있는 자동화된 작업
    - YAML 파일로 저장되며 event 발생시 실행 됨
3. **Jobs**
    - 어떤 이벤트가 발생했을 때 독립된 환경에서 실행되야 하는 일련의 일을 하나 이상의 작업이 하나의 워크플로우를 구성
    - 여러 step들로 구성됨
    - 각각의 step들은 일종의 shell script 처럼 실행 job은 다른 job에 의존관계를 가질 수 있으며 디폴트는 모든 잡들이 병렬적으로 실행 됨.
4. Actions
    - 복잡하고 자주 반복되는 작업을 정의한 커스텀 어플리케이션
    - 워크플로우 안에서 자주 반복되는 코드를 미리 정의해 코드의 양을 줄일 수 있다.
    - 깃허브 마켓플레이스를 통해 공용 Action 또는 다른 사람들이 만든 Action을 사용할 수 있음