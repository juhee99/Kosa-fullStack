<img src="https://noticon-static.tammolo.com/dgggcrkxq/image/upload/v1566778017/noticon/ytjm1rralodyhvuggrpu.png" height="15%" width="15%"> <br/>

# 2023-05-15 / JPA

ğŸ—“ï¸ ë‚ ì§œâ€â€â€â€â€â€â€â€â€â€â€2023/04/ 24

â˜ï¸ ë‚ ì”¨â€â€â€â€â€â€â€â€â€â€â€â˜€ï¸ ëŒ€ì²´ë¡œ í™”ì°½ (17Â°C)

</br>

## 01. JPA

ğŸ’¡ JPAëŠ” Java Persistence API ì•½ìë¡œì„œ , RDBMSì™€ OOP ê°ì²´ ì‚¬ì´ì˜ ë¶ˆì¼ì¹˜ì—ì„œ ì˜¤ëŠ” íŒ¨ëŸ¬ë‹¤ì„ì„ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ ORM(Object Relational Mapping) ê¸°ìˆ ì´ë‹¤.

### 1.2 ORMì´ë€ ?

Object Relational Mapping, ê°ì²´-ê´€ê³„ ë§¤í•‘ì˜ ì¤„ì„ë§ìœ¼ë¡œ OOPì˜ `ê°ì²´ êµ¬í˜„ í´ë˜ìŠ¤ì™€ RDBMSì—ì„œ ì‚¬ìš©í•˜ëŠ” í…Œì´ë¸”ì„ ìë™ìœ¼ë¡œ ë§¤í•‘`í•˜ëŠ” ê²ƒ

- í´ë˜ìŠ¤ì™€ í…Œì´ë¸”ì€ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•˜ëŠ”ë° ORMì„ í†µí•´ í•´ê²°
- ê°ì²´ê°„ì˜ ê´€ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ SQLë¬¸ì„ ìë™ ìƒì„±í•´ì—¬ ë¶ˆì¼ì¹˜ë¥¼ í•´ê²°
- SQLë¬¸ì„ êµ¬í˜„í•  í•„ìš” ì—†ì´ ê°ì²´ë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.

### 1.3 JPA

- ìë°” ORMì— ëŒ€í•œ API í‘œì¤€ ëª…ì„¸ì´ê³ , ì¸í„°í˜ì´ìŠ¤ ëª¨ìŒì´ë‹¤.
- êµ¬í˜„ì²´ê°€ ì—†ìœ¼ë¯€ë¡œ ORM í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ëŒ€ì¤‘ì ì¸ í”„ë ˆì„ ì›Œí¬ëŠ” `Hibernate`ì´ë‹¤.

## 02. Persistence Framwork

ğŸ’¡ JDBC í”„ë¡œê·¸ë˜ë°ì—ì„œ ê²½í—˜í•˜ê²Œ ë˜ëŠ” ë³µì¡í•¨ì´ë‚˜ ë²ˆê±°ë¡œì›€ ì—†ì´ ê°„ë‹¨í•œ ì‘ì—…ë§Œìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™ë˜ëŠ” ì‹œìŠ¤í…œì„ ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ SQL Mapper ì™€ ORMìœ¼ë¡œ ë‚˜ëˆ ì§„ë‹¤. 

- ë°ì´í„°ë¥¼ ìœ ì§€

### 2.1 [ SQL Mapper ]

- SQL â†” SQL Mapper â†” Object
- ì§ì ‘ SQL ë¬¸ì¥ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ë£¸
- Mabatis, Jdbc Templates

### 2.2 [ ORM ]

- Database data â†” ORM â†” Object
- ê°ì²´ë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ë‹¤ë£¸
- ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ìë™ ë§µí•‘ì‹œí‚¨ë‹¤.
- JPA, Hibernate

## 03. JPA í”„ë¡œê·¸ë˜ë°

1. persistence.xml íŒŒì¼ì„ í†µí•´ì„œ JPAë¥¼ ì„¤ì •
2. EntityMangerFactoryë¥¼ ìƒì„±í•œë‹¤.
3. EntityManager ë¥¼ ìƒì„±í•˜ì—¬ Entityë¥¼ **ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸(Persistence Context)**ë¥¼ í†µí•´ì„œ ê´€ë¦¬í•œë‹¤.

### 3.1 EntityMangerFactory

- ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ EntityManger ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°ì²´ë¡œì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•œ ë²ˆë§Œ ìƒì„±í•˜ê³  ê³µìœ í•´ì„œ ì‚¬ìš©í•œë‹¤. â‡’ ì‹±ê¸€í†¤
- Thread-Safe í•˜ë¯€ë¡œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œ ì ‘ê·¼í•´ë„ ì•ˆì „í•˜ë‹¤
- EntityManagerFactory ê°ì²´ë¥¼ í†µí•´ ìƒì„±ë˜ëŠ” ëª¨ë“  EntityManger ê°ì²´ëŠ” ë™ì¼í•œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•œë‹¤.
- persistence.xmlì—ì„œ db ì„¤ì •ì„ í•´ì•¼í•œë‹¤.

### 3.2  EntityManger

- Entityë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì´ë‹¤.
- CRUDì‘ì—…ì€ ëª¨ë‘ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” EntityManger ê°ì²´ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤.
- ë™ì‹œì„±ì˜ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ìŠ¤ë ˆë“œ ê°„ì— ê³µìœ í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ëª¨ë“  ë°ì´í„° ë³€ê²½ì€ íŠ¸ëœì­ì…˜(ë°ì´í„°ë² ì´ìŠ¤ì˜ ë…¼ë¦¬ì  ì‘ì—… ë‹¨ìœ„) ì•ˆì—ì„œ ì´ë£¨ì–´ì ¸ì•¼ í•œë‹¤.

```java
EntityManagerFactory factory = Persistence.createEntityManagerFactory("emptest");
//"" => persistence.xml íŒŒì¼ ì„¤ì •
EntityManager em = factory.createEntityManager();

//close() í•„ìˆ˜
factory.close();
em.close()
```

## 04. Persistence Context

ğŸ’¡ ì–´í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ì´ì— ì¡´ì¬í•˜ëŠ” ë…¼ë¦¬ì ì¸ ê°œë…ìœ¼ë¡œ  Entityë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½ì´ë‹¤.

- Entitymanger ê°ì²´ë¥¼ í†µí•´ì„œë§Œ ì ‘ê·¼í•œë‹¤.
- ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì¡´ì¬í•˜ëŠ” ì—”í‹°í‹°ëŠ” í”ŒëŸ¬ì‹œ í˜¸ì¶œ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜ ëœë‹¤.

- flush()
    - ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ ë‚´ìš©ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ë°˜ì˜í•œë‹¤.
    - flush() ë©”ì†Œë“œë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šê³ , ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¤ë°‹ ëª…ë ¹ì´ ë“¤ì–´ì™“ì„ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.
- clear()
    - persistence contextë¥¼ ìµœê¸°í™”
- find()
    - ì‹ë³„ìë¥¼ í†µí•´ Entityë¥¼ ì°¾ëŠ”ë‹¤.(DB í…Œì´ë¸”ì˜ ë°ì´í„° ë˜ëŠ” í–‰ì„ ì°¾ëŠ”ë‹¤.)
- persist()
    - ìƒì„±ëœ  Entity ê°ì²´ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤.
- remove()
    - ì‹ë³„ì ê°’ì„ í†µí•´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥´ì—ì„œ Entity ê°ì²´ë¥¼ ì‚­ì œí•œë‹¤.

## 05. ì—”í‹°í‹°(Entity)

- DBí…Œì´ë¸”ì— ëŒ€ì‘í•˜ëŠ” í•˜ë‚˜ì˜ ê°ì²´
- @Entity ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì—”í‹°í‹°ë¼ ë¶€ë¥´ë©°, ì—”í‹°í‹°ëŠ” ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ë‹´ê²¨ EntityMangerì— ì˜í•´ ê´€ë¦¬ëœë‹¤.

### 5.1 ì—”í‹°í‹° ìƒëª…ì£¼ê¸°

- ë¹„ì˜ì† : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ ì „í˜€ ê´€ê³„ê°€ ì—†ëŠ” ìƒíƒœ
- ì˜ì† : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœ ìƒíƒœ
- ì¤€ì˜ì† : ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì—ˆë‹¤ê°€ ë¶„ë¦¬ëœ ìƒíƒœ
- ì‚­ì œ : ì‚­ì œëœ ìƒíƒœ

### 5.2 ì—”í‹°í‹° ìƒì„±ê³¼ ì €ì¥

1. ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì–´ë–¤ ì—”í‹°í‹° ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ JPAì—ê²Œ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ì„ ë¶€íƒ
2. ë§Œë“¤ì–´ì§„ ì—”í‹°í‹°ëŠ” 1ì°¨ì ìœ¼ë¡œ ì˜ì†ì„± ì»¨í…ŒìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤(1ì°¨ ìºì‹œ). ì €ì¥í•œ ì—”í‹°í‹°ë¥¼ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥í•˜ê¸° ìœ„í•´ ì¿¼ë¦¬ë¬¸ì„ ìƒì„±ì‹œì¼œ SQL ì €ì¥ì†Œì— ì €ì¥í•œë‹¤. ì´ ë•Œ ì—”í‹°í‹°ë“¤ê³¼ ì¿¼ë¦¬ë¬¸ì€ ì°¨ê³¡ì°¨ê³¡ ì—”í‹°í‹° ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ëœë‹¤.
3. ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì»¤ë°‹ ëª…ë ¹ì„ ë‚´ë¦¬ë©´ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ìë™ flush() í˜¸ì¶œ
4. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ë³€ê²½ë‚´ìš©ì„ ë°ì´í„° ë² ì´ìŠ¤ì™€ ë™ê¸°í™” í•œë‹¤.

<img src="https://github.com/juhee99/Msa-Dkteckin-fullstack/assets/55836020/05cfc617-0334-4fb4-a892-adda0ea89da8" width="80%"/>

### 5.3 ì—”í‹°í‹° ì¡°íšŒ

1. ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ JPAì—ê²Œ ë°ì´í„° ë² ì´ìŠ¤ ì¡°íšŒë¥¼ ë¶€íƒí•˜ë©´, 1ì°¨ì ìœ¼ë¡œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì—”í‹°í‹°ë¥¼ ì°¾ìŒ
2. ìˆìœ¼ë©´ ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì—”í‹°í‹°ë¥¼ ë„˜ê¸´ë‹¤.
3. ì—†ìœ¼ë©´ ì¿¼ë¦¬ë¬¸ì„ ì‚¬ìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì°¾ëŠ”ë‹¤.
4. ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì—”í‹°í‹°ë¥¼ ì €ì¥í•˜ê³  ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì—”í‹°í‹°ë¥¼ ë„˜ê¸´ë‹¤.

## 06. JPQL(Java Persistence Query Language)

ğŸ’¡ ì—”í‹°í‹° ê°ì²´ë¥¼ ì¡°íšŒí•˜ëŠ” ê°ì²´ì§€í–¥ ì¿¼ë¦¬, SQL ë¬¸ë²•ê³¼ ë¹„ìŠ·í•˜ë‹¤.

- (SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN ì§€ì›)
- SQLì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ëŒ€ìƒ, JPQLì€ ì—”í‹°í‹° ê°ì²´ë¥¼ ëŒ€ìƒ
- JPQLì€ ë³„ì¹­ì´ í•„ìˆ˜ ì´ë‹¤.
- ì‘ì„±í•œ JPQLì„ ì‹¤í–‰í•˜ë ¤ë©´ ì¿¼ë¦¬ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. â‡’ TypeQuery, Query
    - TypeQuery :  ë°˜í™˜ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ìˆì„ ë•Œ
    - Query :  ë°˜í™˜ íƒ€ì…ì„ ëª…í™•í•˜ê²Œ ì§€ì •í•  ìˆ˜ ì—†ì„ ë•Œ
        - íŠ¹ì •í•œ ì»¬ëŸ¼ë§Œ ë°›ê³  ì‹¶ì„ ë•Œ, group by í•  ë•Œ
        - List<Object []> , Object []
- ì¿¼ë¦¬ ì‹¤í–‰ : TypeQuery<> query = em.createQuery(â€ì¿¼ë¦¬ ë¬¸â€)
- ê²°ê³¼ ì¡°íšŒ
    - List<> result =  query.getResultList();  : ê²°ê³¼ê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ,
    - ObjectA result = query.getSingleResult() : ê²°ê³¼ê°€ í•˜ë‚˜ ì¼ ë•Œ
- íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
    - ì´ë¦„ìœ¼ë¡œ êµ¬ë¶„ :parm
    - ìœ„ì¹˜ ê¸°ì¤€ : ?index

**[ì˜ˆì œ-EmpDAO.java]**

```java
public class EmpDAO {
	EntityManagerFactory factory = Persistence.createEntityManagerFactory("emptest");
    EntityManager em = factory.createEntityManager();
    public void close() {
    	em.close();
    	factory.close();
    }
	public Long getAllDataNum() {	
		TypedQuery<Long> q = em.createQuery("select count(t.empno) from EmpVO t", Long.class);
		return q.getSingleResult();   
	}
	
	public String getEmpNum(Integer numOfEmp) {
		EmpVO e = em.find(EmpVO.class, numOfEmp);
		if (e != null)
			return e.getEname();
		else
			return "ì—†ìŒ";
	}

	public List<EmpVO> findByJob(String job) {
		TypedQuery<EmpVO> q = em.createQuery("SELECT t FROM EmpVO t WHERE t.job = :job", EmpVO.class);
		q.setParameter("job", job); 
		List<EmpVO> resultList = q.getResultList();
		return resultList;
	}

	public List<EmpVO> findByPartEname(String partEname) {
		TypedQuery<EmpVO> q = em.createQuery("SELECT t FROM EmpVO t WHERE t.ename like :pe", EmpVO.class);
		q.setParameter("pe", "%"+partEname+"%"); 
		List<EmpVO> resultList = q.getResultList();
		return resultList;
	}
	
	public List<EmpVO> findByGreaterThanSal(int sal) {
		TypedQuery<EmpVO> q = em.createQuery("SELECT t FROM EmpVO t WHERE t.sal >= :sal", EmpVO.class);
		q.setParameter("sal", sal); 
		List<EmpVO> resultList = q.getResultList();
		return resultList;
	}

	public List<EmpVO> findByEnameAndJob1(String ename, String job) {
		TypedQuery<EmpVO> q = em.createQuery("SELECT t FROM EmpVO t WHERE t.ename = :ename and t.job = :job", EmpVO.class);
		q.setParameter("ename", ename); 
		q.setParameter("job", job); 
		List<EmpVO> resultList = q.getResultList();
		return resultList;
	}

	public EmpVO findByEnameAndJob2(String ename, String job) {
		TypedQuery<EmpVO>  q = em.createQuery("SELECT t FROM EmpVO t WHERE t.ename = ?1 and t.job = ?2", EmpVO.class);
		q.setParameter(1, ename); 
		q.setParameter(2, job); 
		EmpVO result = q.getSingleResult();
		return result;
	}
	
	public List<EmpFreqVO> findByEmpFreqVO() {
		TypedQuery<EmpFreqVO>  q = em.createQuery("SELECT new jpamvcexam.model.vo.EmpFreqVO(t.empno, t.ename, t.hiredate, t.sal, t.deptno) FROM EmpVO t", EmpFreqVO.class);
		List<EmpFreqVO> resultList = q.getResultList();
		return resultList;
	}

	public List<EmpVO> listPart(int start, int num) {	
		TypedQuery<EmpVO> q = em.createQuery("SELECT t FROM EmpVO t ORDER BY t.sal DESC", EmpVO.class);
		q.setFirstResult(start);    // ì¡°íšŒ ì‹œì‘ ìœ„ì¹˜
		q.setMaxResults(num);       // ì¡°íšŒí•  ë°ì´í„° ìˆ˜
		List<EmpVO> resultList = q.getResultList();
		return resultList;
	}
	
	public Object[] getGroupFunc() {	
		Query query = em.createQuery("SELECT sum(t.sal), max(t.sal), min(t.sal) FROM EmpVO t");
		Object[] result = (Object[])query.getSingleResult();
		return result;
	}	
	
}
```

## 08. JPA ê¸°ë³¸í‚¤ ë§µí•‘

ğŸ’¡ ì§ì ‘ í• ë‹¹í•˜ëŠ” ê²½ìš° ì—”í‹°í‹°(@Entity)ì— @Id ì–´ë…¸í…Œì´ì…˜ë§Œ ì‚¬ìš©, ìë™ ìƒì„±ì€ @Idì™€ @GeneratiedValueë¥¼ ì¶”ê°€

- IDENTITY :ê¸°ë³¸í‚¤ ìƒì„±ì„ dbì— ìœ„ì„í•œë‹¤.
    - @GeneratedValue(strategy = GenerationType.IDENTITY)
- SEQUENCE : DB ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ê¸°ë³¸í‚¤ë¥¼ í• ë‹¹í•œë‹¤.
    - @GeneratedValue(strategy = GenerationType.SEQUENCE, generator =
    "ET1_SEQ_GENERATOR")

## ê¸°íƒ€

- java. â€”> ì½”ì–´, ê¸°ë³¸
- javax. â€”> í™•ì¥
  


## Exercise01 / ìˆœìˆ˜ JPA

<details>
<summary>ğŸ“œ JPA ì‹¤ìŠµ í¼ì³ë³´ê¸°</summary>
<div markdown="1">

[5ì›”15ì¼_1.pdf](https://github.com/juhee99/Msa-Dkteckin-fullstack/files/11484225/5.15._1.pdf)

1ï¸âƒ£ BookDAO.java

```java
public class BookDAO {
    EntityManagerFactory factory = Persistence.createEntityManagerFactory("emptest");
    EntityManager em = factory.createEntityManager();

    public void close() {
        em.close();
        factory.close();
    }

    public List<BookVO> getAllBook(){
        TypedQuery<BookVO> q = em.createQuery("select b from BookVO b",BookVO.class);
        return q.getResultList();
    }

    public List<BookVO> getExpensiveBooks(){
        TypedQuery<BookVO> q = em.createQuery("select b from BookVO b order by b.price desc", BookVO.class);
        return q.getResultList();
    }

    public List<BookVO> getBooksThanPrice(){
        TypedQuery<BookVO> q = em.createQuery("select b from BookVO b where b.price > 20000", BookVO.class);
        return q.getResultList();
    }

    public BookVO findByID(int id){
        return em.find(BookVO.class,id);
    }

    public List<BookVO> findByTitle(String pram){
        TypedQuery<BookVO> q = em.createQuery("select b from BookVO b where b.title like :pram", BookVO.class);
        q.setParameter("pram","%"+pram+"%");
        return q.getResultList();
    }

    public List<Object[]> getTotalPriceByKind(){
        Query q = em.createQuery("select b.kind, sum(b.price) from BookVO b group by b.kind");
        return q.getResultList();
    }
}
```

2ï¸âƒ£ JPASelectBookLab.java

```java
public class JPASelectBookLab {

    public static void main(String[] args){
        Scanner scan = new Scanner(System.in);
        BookDAO dao = new BookDAO();

        while(true){
            printMenu();
            System.out.print("ì›í•˜ëŠ” ë©”ë‰´ì˜ ë²ˆí˜¸ë¥¼ ì„ íƒ : ");
            int chooseNum = scan.nextInt();
            if (chooseNum == 7){
                dao.close();
                scan.close();
                return;
            }else if(chooseNum < 1 || chooseNum > 7) continue;

            printResult(chooseNum,dao);

        }
    }

    public static void printMenu(){
        System.out.println("\n\n=============Menu=================");
        System.out.println("1.ëª¨ë‘ ì¶œë ¥í•˜ê¸°");
        System.out.println("2.ê°€ê²©ì´ ë†’ì€ ìˆœìœ¼ë¡œ ì¶œë ¥í•˜ê¸°");
        System.out.println("3.20000ì› ì´ìƒì˜ ë„ì„œë“¤ë§Œ ì¶œë ¥í•˜ê¸°");
        System.out.println("4.id ê°€ 3ë²ˆì¸ ë„ì„œ ì¶œë ¥ ì¶œë ¥í•˜ê¸°");
        System.out.println("5.ë„ì„œëª…ì— 'ìë°”' ë˜ëŠ” 'ìŠ¤í”„ë§'ë¥¼ í¬í•¨í•˜ëŠ” ë„ì„œë“¤ë§Œ ì¶œë ¥í•˜ê¸° ì¶œë ¥í•˜ê¸°");
        System.out.println("6.ë¶„ë¥˜ë³„ ë„ì„œ ê°€ê²©ì˜ í•©ì„ ì¶œë ¥í•˜ê¸°");
        System.out.println("7.ì¢…ë£Œ");
        System.out.println("==================================");
        System.out.println("\n\n");
    }

    public static void printResult(int chooseNum, BookDAO dao){
        List<BookVO> list= null;
        switch (chooseNum){
            case 1:
                list = dao.getAllBook();
                list.forEach(System.out :: println);
                break;
            case 2 :
                list = dao.getExpensiveBooks();
                list.forEach(System.out ::println);
                break;
            case 3:
                list = dao.getBooksThanPrice();
                list.forEach(System.out ::println);
                break;
            case 4 :
                System.out.println(dao.findByID(3) ==null ? "idê°€ 3ë²ˆì¸ ë„ì„œëŠ” ì—†ìŠµë‹ˆë‹¤.": dao.findByID(3));
                break;
            case 5:
                String pram = new Random().nextBoolean() ? "ìë°”" : "ìŠ¤í”„ë§";
                list =dao.findByTitle(pram);
                list.forEach(System.out ::println);
                break;
            case 6:
                List<Object []> objects = dao.getTotalPriceByKind();
                for(Object [] obj : objects){
                    System.out.println("ë¶„ë¥˜ ì½”ë“œ "+obj[0]+"\t"+obj[1]+"ì›");
                }
        }
    }
}
```

</div>
</details>


## ğŸ¤·â€â™€ï¸ **todayâ€™s feeling**

- close() ì‹ ê²½ì¨ì„œ í•˜ê¸°.
- mabatisëŠ” í…Œì´ë¸” ìœ„ì£¼ë¡œ í•˜ëŠ” ê²ƒì— ë¹„í•´ JPAëŠ” ê°ì²´ ê¸°ì¤€ìœ¼ë¡œ í•˜ëŠ” ì ì´ ë”ì´ í¸ë¦¬í•˜ê²Œ ëŠê»´ì¡Œë‹¤.-> sql ë³´ë‹¤ ê°ì²´ê°€ ë” ìµìˆ™í•˜ë‹¤.
- ì˜ˆì „ jpaë¥¼ í•™ìŠµí• ë•Œ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ëŒ€í•´ ì´í•´í•˜ì§€ ëª»í–ˆëŠ”ë° ì •í™•í•˜ê²Œ ì•Œê²Œë¨ -> jpaì˜ ì¥ì ì„ í™•ì‹¤í•˜ê²Œ ëŠë¼ê²Œ ë˜ì—ˆë‹¤.
